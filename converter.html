<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Special Character Converter</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 2rem;
    }
    input, button {
      padding: 0.5rem;
      margin: 0.5rem 0;
      width: 100%;
      max-width: 400px;
      font-size: 1rem;
    }
    .output {
      margin-top: 1rem;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h2>Special Character Converter</h2>

  <label for="latexInput">Enter text for LaTeX label:</label>
  <input type="text" id="latexInput">
  <button onclick="handleLatexConversion()">Convert to LaTeX Label</button>
  <div class="output" id="latexOutput"></div>

  <label for="filenameInput">Enter text for filename:</label>
  <input type="text" id="filenameInput">
  <button onclick="handleFilenameConversion()">Convert to Filename</button>
  <div class="output" id="filenameOutput"></div>

  <script>
    // Mapping for special characters → ASCII equivalents
    const mapping = {
      "ä": "ae", "ö": "oe", "ü": "ue", "ß": "ss",
      "é": "e", "è": "e", "ê": "e", "ë": "e", "ç": "c",
      "ñ": "n", "á": "a", "í": "i", "ó": "o", "ú": "u",
      "à": "a", "ì": "i", "ò": "o", "ù": "u",
      "ã": "a", "õ": "o",
      "ø": "oe", "å": "aa", "æ": "ae",
      "đ": "d", "ð": "d", "þ": "th",
      "ł": "l", "ń": "n", "ś": "s", "ź": "z", "ż": "z",
      "č": "c", "ď": "d", "ě": "e", "ň": "n", "ř": "r",
      "š": "s", "ť": "t", "ů": "u", "ž": "z",
      "ő": "o", "ű": "u",
      "ș": "s", "ț": "t",
      "ı": "i", "ğ": "g", "ş": "s"
    };

    // Regular expression to match all special characters in the mapping
    const regex = new RegExp(Object.keys(mapping).join("|"), "g");

    // Replace known special characters with ASCII equivalents
    function replaceSpecialChars(text) {
      return text.replace(regex, match => mapping[match]);
    }

    // Remove diacritic marks (accents, tildes, etc.)
    function removeDiacritics(text) {
      return text.normalize("NFKD").replace(/\p{M}/gu, "");
    }

    // Clean text for LaTeX labels or filenames
    function cleanText(text) {
      text = replaceSpecialChars(text);
      text = removeDiacritics(text);
      text = text.replace(/[^a-zA-Z0-9_]/g, "_");
      text = text.replace(/__+/g, "_").replace(/--+/g, "-");
      text = text.replace(/^_|_$/g, "").replace(/^-|-$|^\./g, "");
      return text;
    }

    // Convert input to a LaTeX label format (lowercase)
    function convertToLatexLabel(text) {
      return cleanText(text).toLowerCase();
    }

    // Convert input to a filename format (case preserved)
    function convertToFilename(text) {
      return cleanText(text);
    }

    // Handle LaTeX label conversion from input field
    function handleLatexConversion() {
      const input = document.getElementById("latexInput").value;
      const output = convertToLatexLabel(input);
      document.getElementById("latexOutput").textContent = "Result: " + output;
    }

    // Handle filename conversion from input field
    function handleFilenameConversion() {
      const input = document.getElementById("filenameInput").value;
      const output = convertToFilename(input);
      document.getElementById("filenameOutput").textContent = "Result: " + output;
    }
  </script>
</body>
</html>
